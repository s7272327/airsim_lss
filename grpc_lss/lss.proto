syntax = "proto3";

package lss;

message Image {
  int32 camera_id = 1;
  bytes data = 2;
  int32 width = 3;
  int32 height = 4;
  double timestamp = 5;
}

message DroneInput {
  int32 drone_id = 1;
  repeated Image images = 2;
}

message LSSRequest {
  repeated DroneInput drones = 1;
}

message Neighbor {
  int32 neighbor_id = 1;
  float x = 2;
  float y = 3;
  float z = 4;
  float yaw = 5;
}

message DroneResult {
  int32 drone_id = 1;
  repeated Neighbor neighbors = 2;
}

message LSSResponse {
  repeated DroneResult results = 1;
}

service LSSService {
  rpc Infer (LSSRequest) returns (LSSResponse);
}
